<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>test-map</title>
	<style>
	  a, input{display:block;margin:10px;}
	</style>
    <script src='http://e.cnpc.com.cn:66/js/api/RuixinOpenAPI.js'></script>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but test-map doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
	<a href="weixin://">打开微信</a>
	<a href="mqq://">打开QQ</a>
	<a href="taobao://">打开淘宝</a>
	<a href="baidumap://">打开百度地图</a>
	
	<a href="seeyon://m3">打开移动办公</a>
	
	<p id="demo">点击这个按钮，获得您的坐标：</p>
	<button onclick="getLocation()">试一下</button>
	
	<input type="file" accept="image/*" capture="camera">调用设备摄像头
	<input type="file" accept="image/*" multiple>多选
	
	<a href="javascript:void(0);" onclick="gotoApp('weixin://')">瑞信打开微信</a>
	<a href="javascript:void(0);" onclick="gotoApp('mqq://')" >瑞信打开QQ</a>
	<a href="javascript:void(0);" onclick="gotoApp('taobao://')" >瑞信打开淘宝</a>
	<a href="javascript:void(0);" onclick="gotoApp('baidumap://')" >瑞信打开百度地图</a>
	<a href="javascript:void(0);" onclick="gotoApp('seeyon://m3')" >瑞信打开移动办公</a>
	
	
	
	起点名称：<input id='start'/>
	终点名称：<input id='end'/>
    <a href="javascript:void(0);" onclick="jump(1)">高德地图</a>
    <a href="javascript:void(0);" onclick="jump(2)">百度地图</a>
	
<!--<a href="androidamap://navi?sourceApplication=appname&amp;poiname=fangheng&amp;lat=36.547901&amp;lon=104.258354&amp;dev=1&amp;style=2">导航</a>
<a href="amapuri://route/plan/?sid=&slat=39.92848272&slon=116.39560823&sname=A&did=&dlat=39.98848272&dlon=116.47560823&dname=B&dev=0&t=0">测试</a>
-->	  
  </body>
  <script>
	var ruixin = new RuixinApi();
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
  function success(msg){
  		  alert('成功-'JSON.stringify(msg));
  };
  function fail(msg){
  		  alert('失败-'+JSON.stringify(msg));
  };
function showPosition(position)
  {
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br />Longitude: " + position.coords.longitude;	
  } 
	  
	  function gotoApp(AppUrl){
		  let params = {
		                "urlScheme": AppUrl,
		                "success": "success",
						"fail": "fail"
		            };
		      ruixin.openUrlScheme(params);
	  }
	  
    function jump(param){
	  // alert(document.getElementById('start').value);
          let proto = '';
	  let AppUrl = '';
	  const u = navigator.userAgent;
          const isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
	  
	  let curLat = 39.92848272,
	      curLng = 116.39560823,
	      currAddr = 'A',
	      elat = 39.98848272,
	      elng = 116.47560823,
	      eaddr = 'B';
	  if(param === 1){
	     // 苹果和安卓头部不一样
	  proto = isiOS ? 'iosamap://path' : 'amapuri://route/plan'  ;
          AppUrl = proto + "?sid=&slat="+curLat+"&slon="+curLng+"&sname="+currAddr+"&dlat="+elat+"&dlon="+elng+"&dname="+eaddr+"&dev=0&t=0";
          ToggleApp(AppUrl);
	  }else{
          proto = isiOS ? 'baidumap://'  : 'bdapp://' 
          AppUrl = proto +  "map/navi?query=故宫&src=andr.baidu.openAPIdemo";
	  let commonCallback = ()=>{};	  
	  let params = {
                    "urlScheme": AppUrl,
                    "success": "commonCallback"
                };
          ruixin.openUrlScheme(params);
          //ToggleApp(AppUrl);
	  }
	}
	
	function  ToggleApp( AppUrl){
	  const ifr = document.createElement('iframe');
	  ifr.src = AppUrl;
	  ifr.style.display = 'none';
	  document.body.appendChild(ifr);
	  setTimeout(function(){
		document.body.removeChild(ifr);
	  }, 3000);
    }

  </script>
</html>
