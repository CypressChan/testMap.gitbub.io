<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>test-map</title>
	<style>
	  a {display:block;margin:10px;}
	</style>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but test-map doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app">
	<a href="https://uri.amap.com/marker?position=经度,纬度&name=所在的位置名称">高德地图</a>
	<a href="http://api.map.baidu.com/marker?location=纬度,经度&title=所在位置名称&content=所在位置的简介（可选）&output=html">百度地图</a>
	
	<a href="https://uri.amap.com/marker?position=30.5490009959,104.0777968852&name=天府软件园">高德地图经纬度</a>
	<a href="http://api.map.baidu.com/marker?location=104.0777968852,30.5490009959&title=天府软件园&content=所在位置的简介（可选）&output=html">百度地图经纬度</a>
	</div>
	
	<a href="javascript:void(0);" onclick="jump(1)">唤醒高德app</a>
    <a href="javascript:void(0);" onclick="jump(2)">唤醒百度app</a>
  </body>
  <script>
    function jump(param){
	  let proto = '';
	  let AppUrl = '';
	  const u = navigator.userAgent;
      const isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
	  
	  let curLat = 104.0777968852,
		  curLng = 30.5490009959,
		  currAddr = '天府软件园',
		  elat,
		  elng,
		  eaddr;
	  if(param === 1){
	     // 苹果和安卓头部不一样
		proto = isiOS ? 'iosamap://path' : 'amapuri://route/plan'  ;
        AppUrl = proto + "?t= 0&slat="+curLat+"&slon="+curLng+"&sname="+currAddr+"&dlat="+elat+"&dlon="+elng+"&dname="+eaddr+"&src=xxx";
		console.log(AppUrl);
        ToggleApp(AppUrl);
	  }else{
        proto = isiOS ? 'iosamap://path' : 'amapuri://route/plan'  ;
        AppUrl = proto + "?t= 0&slat="+curLat+"&slon="+curLng+"&sname="+currAddr+"&dlat="+elat+"&dlon="+elng+"&dname="+eaddr+"&src=xxx";
        ToggleApp(AppUrl);
	  }
	}
	
	function  ToggleApp( AppUrl){
	  const ifr = document.createElement('iframe');
	  ifr.src = AppUrl;
	  ifr.style.display = 'none';
	  document.body.appendChild(ifr);
	  setTimeout(function(){
		document.body.removeChild(ifr);
	  }, 3000);
    }

  </script>
</html>