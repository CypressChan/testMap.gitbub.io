<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>test-map</title>
	<style>
	  a, input{display:block;margin:10px;}
	</style>
    <script src='http://e.cnpc.com.cn:66/js/api/RuixinOpenAPI.js'></script>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but test-map doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
	<a href="tel:18980057646">打电话</a>
	<a href="taobao://">打开淘宝</a>
	<a href="bdapp://map/navi">打开百度地图</a>
	<a href="seeyon://m3">打开移动办公</a>
	<a href="com.skysoft.gtx://">打开18900com.skysoft.gtx://</a>
	<a href="com.ainemo.rflink://">打开中油易连com.ainemo.rflink://</a>
	<a href="youku://">打开优酷</a>
	<a href="zhihu://">打开知乎</a>
	
	<a href="zsyenterprisehall.taobao://">移动大厅打开淘宝</a>
	<a href="zsyenterprisehall.bdapp://map/navi">移动大厅打开百度地图</a>
	<a href="zsyenterprisehall.seeyon://m3">移动大厅打开移动办公</a>
	
	<button onclick="openAPP('seeyon://m3')">创建标签打开移动办公</button>
	<button onclick="openAPP('http://www.baidu.com')">直接打开页面</button>
	
	<p id="demo">点击这个按钮，获得您的坐标：</p>
	<button onclick="getLocation()">试一下</button>
	
	<input type="file" accept="image/*" capture="camera">调用设备摄像头
	<input type="file" accept="image/*" multiple>多选
	
	
	
	<a href="javascript:void(0);" onclick="gotoApp('com.ainemo.rflink://')" >瑞信打开中油易连安卓</a>
	<a href="javascript:void(0);" onclick="gotoApp('com.richfit.ZYlink://')" >瑞信打开中油易连IOS</a>
	<a href="javascript:void(0);" onclick="gotoApp('taobao://')" >瑞信打开淘宝</a>
	<a href="javascript:void(0);" onclick="gotoApp('bdapp://map/navi')" >瑞信打开百度地图</a>
	<a href="javascript:void(0);" onclick="gotoApp('seeyon://m3')" >瑞信打开移动办公</a>
	<a href="javascript:void(0);" onclick="getToken()" >瑞信获取token</a>
	token：<input id="myToken"/>
	
	<a href="javascript:void(0);" onclick="selectResource(1)" >调用手机拍照/录像/相册功能</a>
	<a href="javascript:void(0);" onclick="selectResource(2)" >上传资源</a>
	<li class='name' data-coheade='测试获取相册图片'>
	    <input id="testFile" type="file" accept="video/*;capture=camcorder" onchange="getFile()">
	    <input type="file" accept="image/*;capture=camera">
	    <input type="file" accept="image/*" />
	    <input type="file" accept="audio/*;capture=microphone">
	    <input type="file" id="take-picture" accept="image/*">
	    <input type="button" value="aaa" onclick="testTelePhoneCall();">
		<video src="https://www.runoob.com/try/demo_source/movie.mp4" controls></video>
	</li>
	
	起点名称：<input id='start'/>
	终点名称：<input id='end'/>
    <a href="javascript:void(0);" onclick="jump(1)">高德地图</a>
    <a href="javascript:void(0);" onclick="jump(2)">百度地图</a>
	
	<p>移动大厅测试</p>
	<input class="change-photo-btn" style="width:100%" type="file" id="image" accept="image/*" capture="environment">
	<xmp><input class="change-photo-btn" style="width:100%" type="file" id="image" accept="image/*" capture="environment"></xmp>
	<input class="change-photo-btn" style="width:100%" type="file">
	<xmp><input class="change-photo-btn" style="width:100%" type="file"></xmp>
	
<!--<a href="androidamap://navi?sourceApplication=appname&amp;poiname=fangheng&amp;lat=36.547901&amp;lon=104.258354&amp;dev=1&amp;style=2">导航</a>
<a href="amapuri://route/plan/?sid=&slat=39.92848272&slon=116.39560823&sname=A&did=&dlat=39.98848272&dlon=116.47560823&dname=B&dev=0&t=0">测试</a>
-->	  
  </body>
  <script>
	 function openAPP(pageUrl){
		 let a = document.createElement('a');
		 a.setAttribute('href', pageUrl);
		 a.setAttribute('target', '_blank');
		 a.setAttribute('id', 'openAPP');
		 // 防止反复添加
		 if(document.getElementById('openAPP')) {
		 	document.body.removeChild(document.getElementById('openAPP'));
		 }
		 document.body.appendChild(a);
		 a.click();	
	 }
	  
	  
	  
	  
	var ruixin = new RuixinApi();
	function getFile(){
		var file = document.getElementById('testFile');
		console.log(file.files[0]);
		alert(file.files[0].name);
	}
	function upSuccess(res){
		alert(JSON.stringify(res));
	}
	function upFail(res){
		alert(JSON.stringify(res));
	}
	function selectMultiResource(res){
		alert(JSON.stringify(res));
	}
	function selectResource(type){
		switch(type){
			case 1:
			  ruixin.selectResource({
				  "success": "upSuccess"
			  })
			  break;
			case 2:
			ruixin.selectResource({
				"success": "upSuccess",
				"fail": "upFail",
				"selectMultiResource": "selectMultiResource"
			})
			  break;
		}
	}
	
	
	function getToken(){
		var input = document.querySelector('#myToken');
		window.success = function(res){
			  input.value = res.token;
		  }
		ruixin.getUserInfo({'success': 'success'}) 
	}
	function gotoApp(AppUrl){
	  var params = {
			"urlScheme": AppUrl
	  };
	  ruixin.openUrlScheme(params);
	}
	
	
	
	
	
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
 
function showPosition(position)
  {
	  alert(JSON.stringify(position.coords));
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br />Longitude: " + position.coords.longitude;	
  } 
	  
	
	  
    function jump(param){
	  // alert(document.getElementById('start').value);
          let proto = '';
	  let AppUrl = '';
	  const u = navigator.userAgent;
          const isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
	  
	  let curLat = 39.92848272,
	      curLng = 116.39560823,
	      currAddr = 'A',
	      elat = 39.98848272,
	      elng = 116.47560823,
	      eaddr = 'B';
	  if(param === 1){
	     // 苹果和安卓头部不一样
	  proto = isiOS ? 'iosamap://path' : 'amapuri://route/plan'  ;
          AppUrl = proto + "?sid=&slat="+curLat+"&slon="+curLng+"&sname="+currAddr+"&dlat="+elat+"&dlon="+elng+"&dname="+eaddr+"&dev=0&t=0";
          ToggleApp(AppUrl);
	  }else{
          proto = isiOS ? 'baidumap://'  : 'bdapp://' 
          AppUrl = proto +  "map/navi?query=故宫&src=andr.baidu.openAPIdemo";
	  let commonCallback = ()=>{};	  
	  let params = {
                    "urlScheme": AppUrl,
                    "success": "commonCallback"
                };
          ruixin.openUrlScheme(params);
          //ToggleApp(AppUrl);
	  }
	}
	
	function  ToggleApp( AppUrl){
	  const ifr = document.createElement('iframe');
	  ifr.src = AppUrl;
	  ifr.style.display = 'none';
	  document.body.appendChild(ifr);
	  setTimeout(function(){
		document.body.removeChild(ifr);
	  }, 3000);
    }

  </script>
</html>
