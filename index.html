<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>test-map</title>
	<style>
	  a {display:block;margin:10px;}
	</style>
    <script src='RuixinOpenAPI.js'></script>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but test-map doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <a href="javascript:void(0);" onclick="jump(1)">高德地图测试</a>
    <a href="javascript:void(0);" onclick="jump(2)">百度地图测试</a>
<!--<a href="androidamap://navi?sourceApplication=appname&amp;poiname=fangheng&amp;lat=36.547901&amp;lon=104.258354&amp;dev=1&amp;style=2">导航</a>
<a href="amapuri://route/plan/?sid=&slat=39.92848272&slon=116.39560823&sname=A&did=&dlat=39.98848272&dlon=116.47560823&dname=B&dev=0&t=0">测试</a>
-->	  
  </body>
  <script>
    ruixin = new RuixinApi();
    function jump(param){
          let proto = '';
	  let AppUrl = '';
	  const u = navigator.userAgent;
          const isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
	  
	  let curLat = 39.92848272,
	      curLng = 116.39560823,
	      currAddr = 'A',
	      elat = 39.98848272,
	      elng = 116.47560823,
	      eaddr = 'B';
	  if(param === 1){
	     // 苹果和安卓头部不一样
	  proto = isiOS ? 'iosamap://path' : 'amapuri://route/plan'  ;
          AppUrl = proto + "?sid=&slat="+curLat+"&slon="+curLng+"&sname="+currAddr+"&dlat="+elat+"&dlon="+elng+"&dname="+eaddr+"&dev=0&t=0";
         // ToggleApp(AppUrl);
	  }else{
          proto = isiOS ? 'baidumap://'  : 'bdapp://' 
          AppUrl = proto +  "map/navi?query=故宫&src=andr.baidu.openAPIdemo";
          //ToggleApp(AppUrl);
	  }
	     let commonCallback = ()=>{alert('回调')};	  
	  let params = {
                    "urlScheme": AppUrl,
                    "success": "commonCallback"
                };
          ruixin.openUrlScheme(params);
	}
	
	function  ToggleApp( AppUrl){
	  const ifr = document.createElement('iframe');
	  ifr.src = AppUrl;
	  ifr.style.display = 'none';
	  document.body.appendChild(ifr);
	  setTimeout(function(){
		document.body.removeChild(ifr);
	  }, 3000);
    }

  </script>
</html>
